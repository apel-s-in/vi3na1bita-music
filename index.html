<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–í–∏—Ç—Ä–∏–Ω–∞ –†–∞–∑–±–∏—Ç–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#181818" />
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="stylesheet" href="styles/main.css">
  
  <!-- ‚úÖ –í–ï–†–ù–£–õ–ò HOWLER -->
  <script src="https://cdn.jsdelivr.net/npm/howler@2.2.4/dist/howler.min.js"></script>
  
  <!-- Core -->
  <script src="./scripts/core/utils.js"></script>
  <script src="./scripts/core/bootstrap.js"></script>
  <script src="./scripts/core/config.js" type="module"></script>
  <script src="./scripts/utils/sw-manager.js" defer></script>

  <!-- Player Core -->
  <script src="./src/PlayerCore.js" type="module"></script>

  <!-- UI Modules -->
  <script src="./scripts/ui/notify.js" defer></script>
  <script src="./scripts/ui/modals.js" defer></script>
  <script src="./scripts/ui/favorites.js" type="module"></script>
  <script src="./scripts/ui/sleep.js" defer></script>
  <script src="./scripts/ui/lyrics-modal.js" defer></script>
  <script src="./scripts/ui/modal-templates.js" type="module"></script>
  <script src="./scripts/ui/sysinfo.js" defer></script>

  <!-- App Modules -->
  <script src="./scripts/app/promocode.js" defer></script>
  <script src="./scripts/app/playback-policy.js" defer></script>
  <script src="./scripts/app/player-ui/lyrics.js" defer></script>
  <script src="./scripts/app/player-ui.js" defer></script>
  <script src="./scripts/app/gallery.js" type="module"></script>
  <script src="./scripts/app/albums.js" type="module"></script>
  <script src="./scripts/app/navigation.js" type="module"></script>

  <script src="./scripts/app.js" type="module"></script>
  <script src="./performance/rum.js" defer></script>
</head>
<body>
  <div id="promocode-block">
    <div class="promo-inner">
      <img class="promo-cover" src="img/logo.png" alt="" draggable="false"/>
      <h2>–í—Ö–æ–¥ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É</h2>
      <input id="promo-inp" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" autocomplete="off" />
      <button id="promo-btn">–í–æ–π—Ç–∏</button>
      <div id="promo-error"></div>
    </div>
  </div>

  <div id="main-block" class="hidden">
    <header>
      <div id="active-album-title" class="active-album-title">‚Äî</div>
      <div id="album-icons" class="album-icons"></div>
      <div id="cover-wrap">
        <button class="cover-gallery-arrow" id="cover-gallery-arrow-left">
             <svg width="24" height="24" viewBox="0 0 24 24"><path fill="white" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </button>
        <div id="cover-slot"><img src="img/logo.png" alt=""></div>
        <button class="cover-gallery-arrow" id="cover-gallery-arrow-right">
             <svg width="24" height="24" viewBox="0 0 24 24"><path fill="white" d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
        </button>
      </div>
      <div id="social-links" class="socials-under-cover"></div>
    </header>

    <div id="now-playing" style="width:100%; max-width:395px; margin:8px auto 0 auto;"></div>
    <div class="track-list" id="track-list"></div>

    <div class="bottom-controls-center">
        <!-- –õ–æ–≥–æ—Ç–∏–ø –¥–ª—è –ø—É–ª—å—Å–∞—Ü–∏–∏ -->
        <img class="logo-bottom" id="logo-bottom" src="img/logo.png" alt=""/>
        <button id="install-pwa-btn" style="display: none;">–£–°–¢–ê–ù–û–í–ò–¢–¨ –ü–†–ò–õ–û–ñ–ï–ù–ò–ï</button>
        <button class="hotkeys-btn" id="hotkeys-btn" style="display:none;">–ì–û–†–Ø–ß–ò–ï –ö–õ–ê–í–ò–®–ò</button>
        <button id="sysinfo-btn" style="display:none;">–û –°–ò–°–¢–ï–ú–ï</button>
        <span class="feedback-link" id="feedback-link">–û–ë–†–ê–¢–ù–ê–Ø –°–í–Ø–ó–¨</span>
        <a class="support-link" id="support-link" href="#" target="_blank">–ü–û–î–î–ï–†–ñ–ê–¢–¨</a>
        <button class="offline-btn" id="offline-btn">OFFLINE</button>
    </div>
  </div>
  <div id="modals-container"></div>

  <template id="mini-header-template">
    <div class="mini-now" id="mini-now">
      <span class="tnum" id="mini-now-num">--.</span>
      <span class="track-title" id="mini-now-title">‚Äî</span>
      <img src="img/star2.png" class="like-star" id="mini-now-star" alt="–∑–≤–µ–∑–¥–∞">
    </div>
  </template>

  <template id="next-up-template">
    <div class="next-up" id="next-up">
      <span class="label">–î–∞–ª–µ–µ:</span>
      <span class="title" title="">‚Äî</span>
    </div>
  </template>

  <!-- ‚úÖ –ü–û–õ–ù–´–ô –®–ê–ë–õ–û–ù –ü–õ–ï–ï–†–ê –°–û –í–°–ï–ú–ò –ö–ù–û–ü–ö–ê–ú–ò -->
  <template id="player-template">
    <div class="lyrics-player-block" id="lyricsplayerblock">
      <div id="lyrics-window" class="lyrics-normal">
        <div class="lyrics-animated-bg"></div>
        <div class="lyrics-scroll" id="lyrics">
          <div class="lyrics-placeholder lyrics-spinner"></div>
        </div>
      </div>

      <div class="player-progress-wrapper">
        <div class="player-progress-bar" id="player-progress-bar">
          <div class="player-progress-fill" id="player-progress-fill">
            <div class="player-progress-handle"></div>
          </div>
        </div>
      </div>
      
      <div class="player-controls">
        <!-- –†—è–¥ 1: –û—Å–Ω–æ–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
        <div class="player-controls-row">
          <span class="time-in-controls" id="time-elapsed">0:00</span>
          <button class="player-control-btn" id="prev-btn">‚èÆ</button>
          <button class="player-control-btn main" id="play-pause-btn">
             <svg id="play-pause-icon" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
          </button>
          <button class="player-control-btn" id="stop-btn" style="width:40px; height:40px; padding:8px;" title="–°—Ç–æ–ø">‚èπ</button>
          <button class="player-control-btn" id="next-btn">‚è≠</button>
          <span class="time-in-controls" id="time-remaining">0:00</span>
        </div>

        <!-- –†—è–¥ 2: –î–æ–ø —Ñ—É–Ω–∫—Ü–∏–∏ -->
        <div class="player-controls-row">
            <button class="player-control-btn" id="pq-btn" title="–ö–∞—á–µ—Å—Ç–≤–æ">Hi</button>
            <button class="player-control-btn" id="mute-btn" title="–ó–≤—É–∫">üîä</button>
            <button class="player-control-btn" id="shuffle-btn" title="Shuffle">üîÄ</button>
            <button class="player-control-btn" id="repeat-btn" title="Repeat">üîÅ</button>
            <button class="sleep-timer-btn" id="sleep-timer-btn" title="–¢–∞–π–º–µ—Ä">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                <span class="sleep-timer-badge" id="sleep-timer-badge" style="display:none">0</span>
            </button>
            <button class="player-control-btn" id="favorites-btn" title="–¢–æ–ª—å–∫–æ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (F)">
                <img src="img/star2.png" id="favorites-btn-icon" style="width:18px;height:18px;">
            </button>
        </div>
      </div>

      <!-- –ì—Ä–æ–º–∫–æ—Å—Ç—å -->
      <div class="volume-control-wrapper">
        <div class="volume-track">
          <div class="volume-fill" id="volume-fill" style="width: 100%;"></div>
          <div class="volume-handle" id="volume-handle" style="left: 100%;"></div>
        </div>
        <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="100">
      </div>

      <!-- –†—è–¥ 3: –õ–∏—Ä–∏–∫–∞ –∏ —Å–≤–∏—Å—Ç–µ–ª–∫–∏ -->
      <div class="player-buttons-wrapper">
         <div class="player-extra-buttons-row">
            <button class="lyrics-toggle-btn lyrics-normal" id="lyrics-toggle-btn" title="–í–∏–¥ –ª–∏—Ä–∏–∫–∏">
                <span class="lyrics-toggle-btn-visual">–¢</span>
            </button>
            <button class="animation-btn" id="animation-btn" title="–ê–Ω–∏–º–∞—Ü–∏—è —Ñ–æ–Ω–∞">A</button>
            <button class="karaoke-btn" id="lyrics-text-btn" title="–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç">üìù</button>
            <button class="stats-btn" id="stats-btn" title="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" style="background:none; border:none; cursor:pointer; font-size:18px; opacity:0.8;">üìä</button>
            <button class="pulse-btn" id="pulse-btn" title="–ü—É–ª—å—Å–∞—Ü–∏—è">
                <span id="pulse-heart">ü§ç</span>
            </button>
            <a class="player-download-btn" id="track-download-btn" href="#" download title="–°–∫–∞—á–∞—Ç—å">üíæ</a>
         </div>
      </div>

      <div id="player-track-info" style="text-align:center; padding:10px; color:#888; font-size:12px;">
          <span id="player-track-artist"></span> - <span id="player-track-title"></span>
      </div>
    </div>
  </template>
</body>
</html>
