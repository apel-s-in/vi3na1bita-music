<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–í–∏—Ç—Ä–∏–Ω–∞ –†–∞–∑–±–∏—Ç–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#181818" />
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="stylesheet" href="styles/main.css">

  <!-- Audio Engine -->
  <script src="https://cdn.jsdelivr.net/npm/howler@2.2.4/dist/howler.min.js"></script>

  <!-- New Architecture Entry Point -->
  <script type="module" src="./scripts/main.js"></script>
</head>
<body>
  <!-- Promocode Screen -->
  <div id="promocode-block">
    <div class="promo-inner">
      <img class="promo-cover" src="img/logo.png" alt="" draggable="false"/>
      <h2>–í—Ö–æ–¥ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É</h2>
      <input id="promo-inp" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" autocomplete="off" />
      <button id="promo-btn">–í–æ–π—Ç–∏</button>
      <div id="promo-error"></div>
    </div>
  </div>

  <!-- Main App -->
  <div id="main-block" class="hidden">
    <header>
      <div id="playlist-title" class="active-album-title">‚Äî</div>
      <div id="album-icons" class="album-icons"></div>
      
      <div id="cover-wrap">
        <div id="cover-slot"><img src="img/logo.png" alt=""></div>
      </div>
    </header>

    <!-- Mini Player Info -->
    <div id="mini-player-info" class="mini-now" style="display:none;">
      <span class="tnum" id="mini-track-num">--.</span>
      <span class="track-title" id="mini-track-title">‚Äî</span>
    </div>

    <!-- Track List -->
    <div class="track-list" id="track-list-container"></div>

    <!-- Bottom Controls -->
    <div class="bottom-controls-center">
        <img class="logo-bottom" id="logo-bottom" src="img/logo.png" alt=""/>
        <button class="offline-btn" id="offline-btn">OFFLINE</button>
    </div>
  </div>

  <!-- Templates (Moved from JS to HTML to save code) -->
  <template id="player-controls-template">
    <div class="lyrics-player-block" id="player-controls">
      <div class="player-progress-wrapper">
        <div class="player-progress-bar" id="progress-bar">
          <div class="player-progress-fill" id="progress-fill"></div>
        </div>
      </div>
      <div class="player-controls">
        <div class="player-controls-row">
          <span class="time-in-controls" id="time-current">0:00</span>
          <button class="player-control-btn" id="btn-prev">‚èÆ</button>
          <button class="player-control-btn main" id="btn-play">‚ñ∂</button>
          <button class="player-control-btn" id="btn-next">‚è≠</button>
          <span class="time-in-controls" id="time-duration">0:00</span>
        </div>
        <div class="player-controls-row">
            <button class="player-control-btn" id="btn-shuffle" title="Shuffle">üîÄ</button>
            <button class="player-control-btn" id="btn-repeat" title="Repeat">üîÅ</button>
            <button class="player-control-btn" id="btn-fav-only" title="Favorites Only">‚òÖ</button>
        </div>
      </div>
      <div id="player-track-info" style="text-align:center; padding:10px; color:#888; font-size:12px;">
          <span id="player-track-artist"></span> - <span id="player-track-title"></span>
      </div>
    </div>
  </template>

  <!-- Modals Container -->
  <div id="modals-container"></div>
</body>
</html>
